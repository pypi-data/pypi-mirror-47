
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Changes 2018 in Lino &#8212; Lino docs 19.6.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/linodocs.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Old changes in Lino" href="old.html" />
    <link rel="prev" title="Changes 2019 in Lino" href="2019.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  
  <div class="section" id="changes-2018-in-lino">
<span id="lino-changes-2018"></span><h1>Changes 2018 in Lino<a class="headerlink" href="#changes-2018-in-lino" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#december" id="id8">December</a></p></li>
<li><p><a class="reference internal" href="#lino-18-12-4" id="id9">2018-12-18</a></p></li>
<li><p><a class="reference internal" href="#lino-18-12-2" id="id10">2018-12-13</a></p></li>
<li><p><a class="reference internal" href="#lino-18-12-1" id="id11">2018-12-12</a></p></li>
<li><p><a class="reference internal" href="#lino-18-12-0" id="id12">2018-12-11</a></p></li>
<li><p><a class="reference internal" href="#lino-18-11-0" id="id13">2018-12-10</a></p></li>
<li><p><a class="reference internal" href="#november-2018" id="id14">November 2018</a></p></li>
<li><p><a class="reference internal" href="#lino-18-10" id="id15">2018-10-30</a></p></li>
<li><p><a class="reference internal" href="#v18-8" id="id16">2018-08-31</a></p></li>
</ul>
</div>
<div class="section" id="december">
<h2><a class="toc-backref" href="#id8">December</a><a class="headerlink" href="#december" title="Permalink to this headline">¶</a></h2>
<p>Fixed <a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2710">#2710</a> in <a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.extjs.html#module-lino.modlib.extjs" title="(in Lino v19.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino.modlib.extjs</span></code></a>  Checking date change. When
<code class="xref py py-attr docutils literal notranslate"><span class="pre">lino.modlib.system.SiteConfig.next_partner_id</span></code> was inadvertently set to
the id of an existing Company, creating a Person caused Lino to overwrite the
data of the company instead of noticing the problem.</p>
<p>(20181226) Removed the pisa build method for printable documents. <a class="reference external" href="http://www.lino-framework.org/api/index.html#cosi" title="(in Lino v19.5)"><span>Lino Così</span></a>
now uses <code class="xref py py-mod docutils literal notranslate"><span class="pre">lino_xl.lib.weasyprint</span></code> as the default build method.</p>
<p>Released <a class="reference external" href="http://www.lino-framework.org/api/index.html#cosi" title="(in Lino v19.5)"><span>Lino Così</span></a> 18.12.1</p>
<p>(20181225) Installing <a class="reference external" href="http://www.lino-framework.org/api/index.html#cosi" title="(in Lino v19.5)"><span>Lino Così</span></a> with the pip command now works with Python3
as described in <a class="reference external" href="http://www.lino-framework.org/dev/quick/install.html#user-install" title="(in Lino v19.5)"><span>Installing Lino</span></a>.</p>
</div>
<div class="section" id="lino-18-12-4">
<span id="id1"></span><h2><a class="toc-backref" href="#id9">2018-12-18</a><a class="headerlink" href="#lino-18-12-4" title="Permalink to this headline">¶</a></h2>
<p>Released version 18.12.5.</p>
<p>Lino was not yet installable using pip under Python 3. Now it is (hopefully).</p>
<p>A new command-line option <code class="docutils literal notranslate"><span class="pre">--quick</span></code> has been added to <a class="reference external" href="http://www.lino-framework.org/api/lino.management.commands.dump2py.html#xfile-restore.py" title="(in Lino v19.5)"><code class="xref std std-xfile docutils literal notranslate"><span class="pre">restore.py</span></code></a>.
The idea was that calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Model.full_clean()</span></code> on every restored database
row might make things very slow. This was used to try <a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2755">#2755</a> on the
field. First tests on real data indicate that it doesn’t give very much.</p>
</div>
<div class="section" id="lino-18-12-2">
<span id="id2"></span><h2><a class="toc-backref" href="#id10">2018-12-13</a><a class="headerlink" href="#lino-18-12-2" title="Permalink to this headline">¶</a></h2>
<p>Released Lino 18.12.2</p>
<p>The new <a class="reference external" href="http://www.lino-framework.org/specs/summaries.html#lino.modlib.summaries.Summarized" title="(in Lino v19.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">lino.modlib.summaries.Summarized</span></code></a> mixin didn’t yet update its
fields during <a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.checkdata.management.commands.checkdata.html#management_command-checkdata" title="(in Lino v19.5)"><code class="xref std std-manage docutils literal notranslate"><span class="pre">checkdata</span></code></a>. And I had no pangs of conscience to
completely review the API at that occasion: Summarizable becomes Summarized,
Summary becomes MonthlySlaveSummary, a new attribute <a class="reference external" href="http://www.lino-framework.org/specs/summaries.html#lino.modlib.summaries.Summarized.delete_them_all" title="(in Lino v19.5)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">delete_them_all</span></code></a> to make sure the developer
knows what it means.</p>
<p><a class="reference external" href="http://www.lino-framework.org/api/lino.utils.jsgen.html#lino.utils.jsgen.py2js" title="(in Lino v19.5)"><code class="xref py py-func docutils literal notranslate"><span class="pre">lino.utils.jsgen.py2js()</span></code></a> now has a keyword argument “compact” that
defaults to True. Because the default behaviour of py2js returns a massive
1-line response which makes it almost impossible to find where an issue in the
json is if there is some problem. In the react renderer im having it using the
<a class="reference external" href="http://www.lino-framework.org/api/lino.core.site.html#lino.core.site.Site.is_demo_site" title="(in Lino v19.5)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">lino.core.site.Site.is_demo_site</span></code></a> value to determine if it wants to have
it be compact or not.</p>
</div>
<div class="section" id="lino-18-12-1">
<span id="id3"></span><h2><a class="toc-backref" href="#id11">2018-12-12</a><a class="headerlink" href="#lino-18-12-1" title="Permalink to this headline">¶</a></h2>
<p>Released version 18.12.1.</p>
<ul>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2745">#2745</a> (Summaries without master) caused some changes in
<a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.summaries.html#module-lino.modlib.summaries" title="(in Lino v19.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino.modlib.summaries</span></code></a>:</p>
<p>Added a new type of summary: a
<code class="xref py py-class docutils literal notranslate"><span class="pre">lino.modlib.summaries.Summarizable</span></code>. Models inheriting this have a
lightning button to the ticket and makes the summary fields get updated during
<code class="xref std std-manage docutils literal notranslate"><span class="pre">computesummaries</span></code>, but unlike it subclasses the objects are not
considered temporary data (i.e. not being deleted during
<code class="xref std std-manage docutils literal notranslate"><span class="pre">computesummaries</span></code>.</p>
<p>Actions for updating summaries now have a “∑” as button_text instead of a
‘lightning’ icon.</p>
<p>First usage example is <a class="reference external" href="http://www.lino-framework.org/specs/noi/tickets.html#lino_noi.lib.tickets.Ticket" title="(in Lino v19.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">lino_noi.lib.tickets.Ticket</span></code></a> which now shows
the total work time (one sum per reporting type) of a ticket.</p>
<p>The summary panel of SessionsByTicket no longer has a ▶ button for starting a
session from ticket. Because the same button exists already in the workflow
buttons where it is more intelligent because the ▶ cheanges to ■ when the
user has an open session on this ticket.</p>
</li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2744">#2744</a> (How to use locally injected fields in a layout) : new method
<a class="reference external" href="http://www.lino-framework.org/api/lino.core.model.html#lino.core.model.Model.get_layout_aliases" title="(in Lino v19.5)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lino.core.model.Model.get_layout_aliases()</span></code></a>.</p></li>
<li><p>Fixed an unreported bug: the <code class="xref std std-manage docutils literal notranslate"><span class="pre">checksummary</span></code> task was maybe not being run daily
by <a class="reference external" href="http://www.lino-framework.org/admin/linod.html#management_command-linod" title="(in Lino v19.5)"><code class="xref std std-manage docutils literal notranslate"><span class="pre">linod</span></code></a>.</p></li>
<li><p>A solution for <a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2746">#2746</a>.
The virtual field <a class="reference external" href="http://www.lino-framework.org/api/lino.core.model.html#lino.core.model.Model.overview" title="(in Lino v19.5)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">lino.core.model.Model.overview</span></code></a> was being used for two different things: (1) in
detail layouts to create customizable “overview panels” and (2) in table layouts
to create a “clickable description”, functionally equivalent to double clicking
on the row.</p>
<p>The latter use should now be done with the new virtual field
<a class="reference external" href="http://www.lino-framework.org/api/lino.core.model.html#lino.core.model.Model.detail_link" title="(in Lino v19.5)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">lino.core.model.Model.detail_link</span></code></a> whose verbose_name is automatically
set to the model’s verbose_name. This is done during startup and probably you
cannot override this.</p>
<p>The <a class="reference external" href="http://www.lino-framework.org/api/lino.core.model.html#lino.core.model.Model.overview" title="(in Lino v19.5)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">lino.core.model.Model.overview</span></code></a> field no longer has a
verbose_name, so application code no longer needs to set it explicitly to
None using <code class="xref py py-func docutils literal notranslate"><span class="pre">dd.update_field()</span></code>.</p>
</li>
</ul>
</div>
<div class="section" id="lino-18-12-0">
<span id="id4"></span><h2><a class="toc-backref" href="#id12">2018-12-11</a><a class="headerlink" href="#lino-18-12-0" title="Permalink to this headline">¶</a></h2>
<p>Released version 18.12.0</p>
<p>We are still working on <a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2741">#2741</a> (Have book test pass with PyPI version
of lino and lino_xl).</p>
</div>
<div class="section" id="lino-18-11-0">
<span id="id5"></span><h2><a class="toc-backref" href="#id13">2018-12-10</a><a class="headerlink" href="#lino-18-11-0" title="Permalink to this headline">¶</a></h2>
<p>Released version 18.11.0</p>
<p>The default value for <a class="reference external" href="http://www.lino-framework.org/api/lino.core.workflows.html#lino.core.workflows.Workflow.verbose_name_plural" title="(in Lino v19.5)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">verbose_name_plural</span></code></a> of a
<a class="reference external" href="http://www.lino-framework.org/api/lino.core.workflows.html#lino.core.workflows.Workflow" title="(in Lino v19.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">lino.core.workflows.Workflow</span></code></a> is now more intelligent: if the workflow
is being used on a single model (which is the case for most workflows), the
text is now “{} states” where {} is the model’s verbose name.</p>
<p><a class="reference external" href="http://www.lino-framework.org/api/lino.utils.memo.html#lino.utils.memo.Parser.register_django_model" title="(in Lino v19.5)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lino.utils.memo.Parser.register_django_model()</span></code></a> now says an understandable
error message “Duplicate renderer for %s” when an application tries to redefine
another renderer on the same model.</p>
<p><a class="reference external" href="http://www.lino-framework.org/api/lino.modlib.uploads.html#module-lino.modlib.uploads" title="(in Lino v19.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino.modlib.uploads</span></code></a> : the summary of AreaUploads now supports being
shown in a grid.  It shows contant as a single paragraph (instead of an UL and
adds an action for opening the salve table in a separate window.</p>
</div>
<div class="section" id="november-2018">
<h2><a class="toc-backref" href="#id14">November 2018</a><a class="headerlink" href="#november-2018" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2682">#2682</a> Optionally allow dashboard items with no data to display</p></li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2670">#2670</a> Leaving a combobox before its store is loaded</p></li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2668">#2668</a> Grid keyboard nav optimizations</p></li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2660">#2660</a> Configure the choices of a TimeField</p></li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2648">#2648</a> Show toolbar list actions in display_type “html”</p></li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2646">#2646</a> Cell cursor jumps to home after inserting a line</p></li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2644">#2644</a> Show current state’s button_text in workflow_buttons</p></li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2632">#2632</a> Hovering over the column header of a grid doesn’t display the help_text</p></li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2497">#2497</a> Comboboxes sometimes show the value instead of the text
(<a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2628">#2628</a> ForeignKey fields are not rendered correctly when detail loads
first time)</p></li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2623">#2623</a> Inconsistent meaning of Ctrl-S and Enter</p></li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2596">#2596</a> Search field is disabled by loadmask</p></li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2577">#2577</a> Row-level edit locking</p></li>
<li><p><a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2544">#2544</a> SiteSearch fails when it finds a name containing “&amp;”</p></li>
</ul>
</div>
<div class="section" id="lino-18-10">
<span id="v18-9"></span><span id="id6"></span><h2><a class="toc-backref" href="#id15">2018-10-30</a><a class="headerlink" href="#lino-18-10" title="Permalink to this headline">¶</a></h2>
<p>Database changes</p>
<ul class="simple">
<li><p>Subclasses of <code class="xref py py-class docutils literal notranslate"><span class="pre">lino.mixins.refs.Referrable</span></code> now always have
<cite>max_length=200</cite>.</p></li>
</ul>
<p>Internal changes:</p>
<ul class="simple">
<li><p>release tags in 18.8 were missing in the git repo because atelier
did not yet push them.</p></li>
<li><p>New model mixin <code class="xref py py-class docutils literal notranslate"><span class="pre">lino.mixins.refs.StructuredReferrable</span></code>.</p></li>
<li><p>New model mixin <a class="reference external" href="http://www.lino-framework.org/specs/users.html#lino.modlib.users.UserPlan" title="(in Lino v19.5)"><code class="xref py py-class docutils literal notranslate"><span class="pre">lino.modlib.users.UserPlan</span></code></a>.</p></li>
<li><p>plain html tables now use <code class="docutils literal notranslate"><span class="pre">class=&quot;text-cell&quot;</span></code> instead of a
hard-coded set of attributes  <code class="docutils literal notranslate"><span class="pre">align=&quot;left&quot;</span></code>.</p></li>
<li><p>The <a class="reference external" href="http://www.lino-framework.org/api/lino.core.renderer.html#lino.core.renderer.HtmlRenderer.table2story" title="(in Lino v19.5)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lino.core.renderer.HtmlRenderer.table2story()</span></code></a> method now
yields a sequence of elements instead of returning a single one.</p></li>
<li><p>We have a new method <a class="reference external" href="http://www.lino-framework.org/api/lino.core.requests.html#lino.core.requests.BaseRequest.show_story" title="(in Lino v19.5)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lino.core.requests.BaseRequest.show_story()</span></code></a>
which is used in the template for the report
(<code class="xref std std-xfile docutils literal notranslate"><span class="pre">ledger/Report/default.weazy.html</span></code>).</p></li>
<li><p>in <a class="reference external" href="http://www.lino-framework.org/api/lino.api.doctest.html#module-lino.api.doctest" title="(in Lino v19.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino.api.doctest</span></code></a>, show_sql_queries and show_sql_summary no
longer call reset_sql_queries.</p></li>
<li><p>we continued to improve the documentation</p></li>
<li><p><a class="reference external" href="http://www.lino-framework.org/api/lino.api.doctest.html#lino.api.doctest.show_sql_summary" title="(in Lino v19.5)"><code class="xref py py-func docutils literal notranslate"><span class="pre">lino.api.doctest.show_sql_summary()</span></code></a> now supports INSERT INTO
and DELETE FROM statements. It now uses <a class="reference external" href="https://sqlparse.readthedocs.io/en/latest/">sqlparse</a>.</p></li>
</ul>
</div>
<div class="section" id="v18-8">
<span id="id7"></span><h2><a class="toc-backref" href="#id16">2018-08-31</a><a class="headerlink" href="#v18-8" title="Permalink to this headline">¶</a></h2>
<p>Version 18.8 was the first release for which pip install worked.  At least
under Python 2.</p>
<p>Released packages: <a class="reference external" href="http://www.lino-framework.org/api/index.html#module-lino" title="(in Lino v19.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino</span></code></a>, <a class="reference external" href="http://www.lino-framework.org/api/index.html#module-lino_xl" title="(in Lino v19.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino_xl</span></code></a>, <a class="reference external" href="http://www.lino-framework.org/api/index.html#module-lino_cosi" title="(in Lino v19.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino_cosi</span></code></a>,
<a class="reference external" href="http://www.lino-framework.org/api/index.html#module-lino_noi" title="(in Lino v19.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino_noi</span></code></a> , <a class="reference external" href="http://www.lino-framework.org/api/index.html#module-lino_tera" title="(in Lino v19.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino_tera</span></code></a>, <a class="reference external" href="http://amici.lino-framework.org/api/index.html#module-lino_amici" title="(in Lino Amici v18.8)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino_amici</span></code></a>,
<a class="reference external" href="http://www.lino-framework.org/api/index.html#module-lino_avanti" title="(in Lino v19.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino_avanti</span></code></a>, <a class="reference external" href="http://welfare.lino-framework.org/api/index.html#module-lino_welfare" title="(in Lino Welfare project home)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino_welfare</span></code></a>, <a class="reference external" href="http://www.lino-framework.org/api/index.html#module-lino_vilma" title="(in Lino v19.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino_vilma</span></code></a>,
<a class="reference external" href="http://www.lino-framework.org/api/index.html#module-lino_care" title="(in Lino v19.5)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lino_care</span></code></a>.</p>
<p>There were many changes… we just didn’t collect descriptions of them yet.</p>
<ul class="simple">
<li><p>20180521 Fixed <a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2393">#2393</a> (Wrong error message when no eid card
found)</p></li>
<li><p>20180522 Fixed <a class="reference external" href="http://bugs.saffre-rumma.net/tickets/Ticket/2395">#2395</a> (Unknown callback
-9223363281463807000).</p></li>
</ul>
</div>
</div>



          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo_web3.png" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Changes in Lino</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p align="center">
<a href="https://github.com/lino-framework/lino" target="_blank">GitHub</a>
<a href="http://pypi.python.org/pypi/lino" target="_blank">pypi</a>

</p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2014-2019 Rumma &amp; Ko Ltd.
      Last updated on Jun 06, 2019.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 2.1.0.    
    <a href="https://raw.github.com/lino-framework/lino/master/docs/changes/2018.rst"
           rel="nofollow">Show Source</a>.
    <a href="http://docs.lino-framework.org/changes/2018.html">Online Link</a>.
    </div>
  </body>
</html>