heat_template_version: 2015-04-30

description: |
  Creates a nova ssh keypair


parameters:
  public_key:
    type: string


resources:

  key_name:
    type: OS::Heat::RandomString
    properties:
      length: 32

  key_pair:
    type: OS::Nova::KeyPair
    properties:
      name: {get_attr: [key_name, value]}
      public_key: {get_param: public_key}


outputs:
  key_name:
    value: {get_attr: [key_name, value]}
