{"version":3,"sources":["dist/wsrpc.js"],"names":["global","factory","exports","module","define","amd","self","WSRPC","this","_classCallCheck","instance","Constructor","TypeError","Deferred","wrapper","func","done","Error","apply","arguments","resolve","reject","promise","Promise","isPending","logGroup","group","level","args","console","groupEnd","log","DEBUG","trace","msg","TRACE","payload","JSON","parse","data","readyState","Object","freeze","0","1","2","3","URL","reconnectTimeout","length","undefined","createSocket","ws","WebSocket","rejectQueue","deferred","connectionNumber","callQueue","callObj","shift","store","id","key","hasOwnProperty","tryCallEvent","event","e","stack","error","callEvents","evName","oneTimeEventStore","i","eventStore","onclose","err","serial","public","state","setTimeout","socket","exc","reconnect","onerror","onopen","ev","send","stringify","onmessage","message","type","routes","method","then","result","asyncRoutes","params","badPromise","promiseMock","handleCall","handleError","handleResult","exception","url","test","window","location","host","concat","scheme","protocol","port","path","replace","getAbsoluteWsUrl","eventId","socketStarted","onconnect","onchange","call","push","makeCall","addRoute","route","callback","isAsync","deleteRoute","addEventListener","removeEventListener","index","onEvent","destroy","close","stateCode","connect","argsObj","info"],"mappings":"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"}