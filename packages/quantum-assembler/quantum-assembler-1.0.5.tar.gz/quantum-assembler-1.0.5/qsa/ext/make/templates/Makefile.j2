#######################################################################
#
#   {{ quantum.project.name|upper }} MAKEFILE
#
#	This Makefile exposes various targets related to the compiling
#	and building of the {{ quantum.project.name|upper }} application.
#
#######################################################################
GIT_COMMIT_HASH=$(shell bash -c "git rev-parse --short HEAD | tr -d '\n'")
IMAGE_TAG ?=$(GIT_COMMIT_HASH)
PYTHONVERSION=$(shell python3 -c "import sys; print('%s.%s' % sys.version_info[:2])")
PYTHONPATH="env/lib/python$(PYTHONVERSION)/site-packages"
QUANTUM_DEPLOYMENT_ENV ?= staging
QUANTUM_DEPLOYMENT_NAME ?= $(QUANTUM_DEPLOYMENT_ENV)
SHELL := /bin/bash
{%- if make.variables %}
{%- for var in make.variables %}
{%- if not var.fromenv %}
{{ var.name }}={{ var.default }}
{%- else %}
{{ var.name }}?={{ var.default }}
{%- endif %}
{%- endfor %}

{% for var in make.variables %}
{%- if var.export %}
export {{ var.name }}
{%- endif %}
{%- endfor %}
{%- endif %}
export GIT_COMMIT_HASH
export IMAGE_TAG
export PYTHONPATH
export QUANTUM_DEPLOYMENT_ENV
export QUANTUM_DEPLOYMENT_NAME


{% for target in make -%}
{{ target.name }}:
{{ target }}


{% endfor %}
# Autogenerated by the Quantum Service Assembler (QSA). If you need to
# manually edit this file, add the following line to .quantumignore:
#
#   {{ FILENAME }}
#
# Existing functionalities may break when excluding this file from
# the QSA build process.
