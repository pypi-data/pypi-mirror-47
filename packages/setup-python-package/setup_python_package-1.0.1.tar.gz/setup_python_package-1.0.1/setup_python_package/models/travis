dist: trusty
sudo: false
git:
  depth: false
addons:
  sonarcloud:
    organization: "{account_lower}-github"
    token:
      secure: {travis_code}
language: python
python:
- '{python_version}'
before_install:
  - pip install --upgrade pytest
install:
- pip install .[test]
script:
- rm -rf .coverage
- coverage erase
- pytest --cov={package} --cov-report xml:coverage.xml 
- coverage combine --append || true
- coverage report
- coverage xml
- sonar-scanner

after_success:
  - coveralls